---

- name: create gluster volume
  become: yes
  gluster.gluster.gluster_volume:
    state: present
    name: "{{volume_name}}"
    bricks: "{{ bind_mount }}{{ brick_number }}/{{ volume_name }}"
    rebalance: yes
    cluster: "{{ groups['nodes'] | map('extract', hostvars, ['ansible_hostname']) }}"
    # using Hostnames
  run_once: true
