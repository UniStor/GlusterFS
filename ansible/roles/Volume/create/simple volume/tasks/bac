---

# using DNS Hostnames instead of ip addresses

- name: create gluster volume
  become: yes
  gluster.gluster.gluster_volume:
    state: present
    name: "{{volume_name}}"
    bricks: "{{export}}{{brick_number}}/{{ btrfs_main_volume }}/{{brick_final_dir}}"
    rebalance: yes
    cluster: "{{ groups['nodes'] | map('extract', hostvars, ['ansible_hostname']) }}"
  run_once: true
